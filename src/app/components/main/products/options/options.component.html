<div class="d-flex">
    <button type="button" class="btn btn-primary" (click)="open(addModal)">Agregar</button>
    <div *ngIf="selectedValue">
        <button type="button" class="btn btn-info ml-2" (click)="open(editModal)">Editar</button>
        <button type="button" class="btn btn-danger ml-2" (click)="open(deleteModal)">Eliminar</button>
    </div>
</div>


<ng-template #addModal let-modal>
  <form [formGroup]="productForm" (ngSubmit)="onSaveFormSubmit()" autocomplete="off">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Agregar Producto</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
        <label>Producto</label>
        <input type="text" 
               class="form-control" 
               placeholder="Nombre del Producto"
               name="name" 
               maxlength="50"
               formControlName="name"
               [ngClass]="{'is-invalid': productForm.controls['name'].touched && productForm.controls['name'].invalid}">
    </div>
    <div class="modal-footer">
      <button type="submit" class="btn btn-secondary" [disabled]="!productForm.valid" (click)="modal.close('Save click')">Guardar</button>
    </div>
  </form>
</ng-template>

<ng-template #editModal let-modal>
  <form [formGroup]="productForm" (ngSubmit)="onEditFormSubmit()" autocomplete="off">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Agregar Producto</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <label>Producto</label>
      <input type="text" 
              class="form-control"
              placeholder="Nombre del Producto" 
              name="name" 
              maxlength="50"
              formControlName="name"
              [ngClass]="{'is-invalid': productForm.controls['name'].touched && productForm.controls['name'].invalid}">    
    </div>
    <div class="modal-footer">
      <button type="submit" class="btn btn-secondary" [disabled]="!productForm.valid" (click)="modal.close('Save click')">Editar</button>
    </div>
  </form>
</ng-template>

<ng-template #deleteModal let-modal>
  <form [formGroup]="productForm" (ngSubmit)="onDeleteFormSubmit()">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Eliminar Producto</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
        <p>¿Estás seguro que deseas eliminar el producto <b>{{ selectedValue.name }}</b>?</p>
    </div>
    <div class="modal-footer">
      <button type="submit" class="btn btn-secondary" (click)="modal.close('Save click')">Eliminar</button>
    </div>
  </form>
</ng-template>